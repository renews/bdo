var tooltipCache={};var site_name="bddatabase.net";$(document).ready(function(){linktip()});function linktip(){$("head").append('<link rel="stylesheet" type="text/css" href="http://'+site_name+'/css/tooltips.min.css">');$('a[href^="http://'+site_name+'/"]').each(function(){var a=this.pathname.replace(/(^\/|\/$)/g,"").split("/");if($(a).size()>=3){var b=a[0];if(a[1]=="item"||a[1]=="npc"||a[1]=="quest"||a[1]=="recipe"||a[1]=="design"||a[1]=="title"||a[1]=="theme"||a[1]=="skill"||a[1]=="buff"||a[1]=="itemset"||a[1]=="sskill"||a[1]=="guildquest"||a[1]=="house"||a[1]=="achievement"||a[1]=="gatherable"||a[1]=="guildquest"||a[1]=="mrecipe"||a[1]=="pet"||a[1]=="mount"||a[1]=="materialgroup"||a[1]=="article"||a[1]=="node"){if(a[1]=="quest"&&3 in a){$(this).attr("data-id",a[1]+"--"+a[3].replace(/[^0-9]/,""));$(this).attr("data-quest_group",a[2].replace(/[^0-9]/,""))}else{if(a[1]=="npc"&&3 in a){$(this).attr("data-id",a[1]+"--"+a[2].replace(/[^0-9]/,""));$(this).attr("data-spawn_id",a[3].replace(/[^0-9]/,""))}else{$(this).attr("data-id",a[1]+"--"+a[2].replace(/[^0-9]/,""))}}$(this).qtip(qtip_bddb(b))}}})}function qtip_bddb(a){return{overwrite:false,style:{classes:"qtip-transparent"},content:{text:function(e,c){var b=$(this).attr(c.options.content.attr);if($(this).data("ct")){d="comment_tip";$(this).qtip("api").set("style.classes",d)}var f=$(this).attr("data-id");if(f){var g=f+$(this).data("quest_group")+$(this).data("spawn_id")+a;if(tooltipCache[g]){return tooltipCache[g]}$.ajax({url:"http://"+site_name+"/tip.php",type:"GET",data:{id:f,quest_group:$(this).data("quest_group"),spawn_id:$(this).data("spawn_id"),grade:$(this).data("grade"),enchant:$(this).data("enchant"),l:a,nf:"on"}}).then(function(h){tooltipCache[g]=h;h=h.replace(/<img src=\"\//g,'<img src="http://'+site_name+"/");c.set("content.text",'<div class="bddatabase">'+h+"</div>")},function(j,h,i){c.set("content.text",h+": "+i)});b=b?b+" (Loading...)":"Loading..."}else{var d="qtip-bootstrap";$(this).qtip("api").set("style.classes",d);$(this).qtip("api").set("position.adjust.x",12);$(this).qtip("api").set("position.adjust.y",12);$(this).qtip("api").set("style.tip.corner",false)}return b}},position:{target:"mouse",effect:false,adjust:{method:"shift",x:5,y:5},viewport:$(window)}}};